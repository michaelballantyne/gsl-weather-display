<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <title>Great Salt Lake Weather Information</title>
        <link href="static/gsl.css" rel="stylesheet" type="text/css" />

        <script type="text/javascript">
            var lakedata = {{ leveldata['graphjson'] }};
            // Store epoch-second time of generation of the page so we can compare to display time and alert if it is out of date.
            var generated = {{ generated }};
            // In case the client needs to show an error, we save the error message configured on the server.
            var errormsg = "{{ errormsg }}";
        </script>

        <script type="text/javascript" src="static/jquery-1.8.2.min.js"></script>
        <script type="text/javascript" src="static/raphael-min.js"></script>
        <script type="text/javascript" src="static/ico.js"></script>
        <script type="text/javascript" src="static/gsl.js"></script>
    </head>

    <body>
        <div id="everything">
            <div id="ltitle" role="banner">
                <img src="static/pageTitle.png" alt="Great Salt Lake" />
            </div>
            <div id="contentFrame">
                <!--show any server generated error message-->
                {% if showerror %}
                <div id="error">{{ errormsg }}</div>
                {% endif %}
                <div id="contentArea" role="main">
                    <!--Start hidden so users don't see re-layout, but only on browsers with JS enabled.-->
                    <script type="text/javascript">$("div#contentArea").css('visibility', 'hidden')</script>
                    <div id="levelcolumn">
                        <div id="leveltext">
                            <h3>Lake Elevation</h3>
                            <table cellspacing="0">
                                <tr>
                                    <th></th>
                                    <th>South Arm</th>
                                    <th class="sub">Date</th>
                                    <th>North Arm</th>
                                    <th class="sub">Date</th>
                                </tr>
                                <tr>
                                    <th>Current</th>
                                    <td colspan="2">{{ leveldata['current_saltair'] }} Feet</td>
                                    <td colspan="2">{{ leveldata['current_saline'] }} Feet</td>
                                </tr>
                                <tr>
                                    <th>Historic High</th>
                                    <td>4,211.6 Feet</td>
                                    <td>Jun 3, 1986</td>
                                    <td>4,211.20 Feet</td>
                                    <td>Apr. 7-29, 1987</td>
                                </tr>
                                <tr>
                                    <th>Historic Low</th>
                                    <td>4,191.4 Feet</td>
                                    <td>Nov 1, 1963</td>
                                    <td>4,192.40 Feet</td>
                                    <td>Oct 26, 2010</td>
                                </tr>
                            </table>
                        </div>        

                        <div id="levelbox">
                            <h3 id="graphtitle">Lake Elevation above NGVD 1929, feet</h3>

                            <div id="graphcontainer">
                                <div id="legend">
                                    <ul>
                                        <li class="south"><span>South Arm</span></li>
                                        <li class="north"><span>North Arm</span></li>
                                    </ul>
                                </div>
                                <div id="graph">
                                    <noscript>
                                        <p>This graph requires JavaScript to display.</p>
                                        <!-- So that the white box still surrounds the key -->
                                        <div class="clear"></div>
                                    </noscript>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="weathercolumn">
                        <div id="weathertext">
                            <h3>Weather (as of {{ hatisland['date'] }})</h3>

                            <table class="weather left" cellspacing="0">
                                <tr>
                                    <th class="caption" colspan="2">Current</th>
                                </tr>
                                <tr>
                                    <th>Air Temp</th>
                                    <td>{{ hatisland['temp_f'] }} F / {{ hatisland['temp_c'] }} C</td>
                                </tr>
                                <tr>
                                    <th>Wind</th>
                                    <td>{{ hatisland['wind_speed'] }} mph {{ hatisland['wind_direction'] }}</td>
                                </tr>
                                <tr>
                                    <th>Gust</th>
                                    <td>{{ hatisland['gust'] }} mph</td>
                                </tr>
                            </table>
                            <table class="weather" cellspacing="0">
                                <tr>
                                    <th class="caption" colspan="2">Last 24 Hours</th>
                                </tr>
                                <tr>
                                    <th>High Temp</th>
                                    <td>{{ hatisland['high_temp_f'] }} F / {{ hatisland['high_temp_c'] }} C</td>
                                </tr>
                                <tr>
                                    <th>Low Temp</th>
                                    <td>{{ hatisland['low_temp_f'] }} F / {{ hatisland['low_temp_c'] }} C</td>
                                </tr>
                                <tr>
                                    <th>High Gust</th>
                                    <td>{{ hatisland['high_gust'] }} mph</td>
                                </tr>
                            </table>

                        </div>
                        <div id="radarbox">
                            <h3>Salt Lake City, UT Radar Base Reflectivity</h3>
                            <img alt="Radar Image" src="http://radar.weather.gov/lite/NCR/MTX_loop.gif" alt="Recent Radar Information" />
                        </div>
                    </div>    
                </div>
            </div>
        </div>
    </body>
</html>
